<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="../css/lib/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" type="text/css" href="../css/component.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <script type="text/javascript" src="../js/lib/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="../js/lib/jquery.mobile-1.4.5.min.js"></script>
    <script>
    $(document).one("pagecreate", "#viewSettingList", function() {

        $("#viewSettingList").pagecontainer({
            create: function(event, ui) {

                /********************************** function *************************************/

                function queryQuickReserve() {

                    // var obj = new Object();
                    // obj.id = "0001"
                    // obj.title = "BenQ會議室";
                    // obj.people = "none";
                    // obj.time = "0830";
                    // obj.floor = "1f,2f,3f";

                    // localStorage.setItem('localData', JSON.stringify(obj));

                    var data = JSON.parse(localStorage.getItem('localData'));
                    var htmlContent = "";

                    for (var i = 0, item; item = data['content'][i]; i++) {
                        htmlContent
                            += replace_str($('#setting').get(0).outerHTML, item);
                    }

                    $("#setting").remove();
                    $("#default").after(htmlContent);

                }

                /********************************** page event *************************************/
                $("#viewSettingList").on("pagebeforeshow", function(event, ui) {
                    // loadingMask("show");
                    queryQuickReserve();
                });

                /********************************** dom event *************************************/
                function replace_str(content, item) {

                    var peopleStr = (item.people == 'none') ? "不限" : item.people;
                    // var start_time = new Date(item.time);
                    // var end_time = end_time.setMinutes(start_time.getMinutes() + 30);
                    // var timeStr = (item.time == 'hour') ? "現在起一小時" : start_time + ' - ' + end_time;
                    var floorStr = (item.floor == 'none') ? "不限" : item.floor;

                    return content
                        .replace('index', item.id)
                        .replace('title', item.title)
                        .replace('people', peopleStr)
                        .replace('time', item.time)
                        .replace('floor', floorStr);
                }
            }
        });

    });
    </script>
</head>

<body>
    <div data-role="page" id="viewSettingList">
        <div class="ios-fix-overlap-div"></div>
        <div data-role="header" data-position="fixed" class="page-header">
            <div id="container" class="header-style">
                <div id="left" class="ui-title">
                    <a href="#viewReserve">返回</a></div>
                <div id="center" class="ui-title">偏好設置</div>
                <div id="right" class="ui-title">
                    <a href="#viewNewSetting">新增</a></div>
            </div>
        </div>
        <div data-role="main" class="page-main">
            <div id="default" class="ui-btn ui-shadow ui-corner-all ui-margin-10">
                <h2 class="ui-color-yellow ui-position-adjust">
                        現在空的會議室 BQT/QTT</h2>
                <hr class="ui-color-yellow col-95 ui-position-adjust" />
                <div class="ui-grid-a ui-position-adjust">
                    <div class="ui-block-a col-5">
                        人數&nbsp;不限
                    </div>
                    <div class="ui-block-b col-5">
                        時段&nbsp;現在起一小時
                    </div>
                </div>
                <div class="ui-position-adjust">優先樓層&nbsp;不限</div>
            </div>
            <div id="setting" class="ui-btn ui-shadow ui-corner-all ui-margin-10 ui-hasBtn">
                <h2 class="ui-color-yellow ui-position-adjust">
                        title</h2>
                <a href="#Delete" value="index" class="ui-btn ui-shadow ui-corner-all ui-delete-btn">刪除</a>
                <hr class="ui-color-yellow col-95 ui-position-adjust" />
                <div class="ui-grid-a ui-position-adjust">
                    <div class="ui-block-a col-5">
                        人數&nbsp;people
                    </div>
                    <div class="ui-block-b col-5">
                        時段&nbsp;time
                    </div>
                </div>
                <div class="ui-position-adjust">優先樓層&nbsp;floor</div>
            </div>
        </div>
    </div>
</body>

</html>
