"use strict";!function(){function t(t,e,a){return e.type||(e.type="auto"),(!a||!1!==t.fire("beforePaste",e))&&(!(!e.dataValue&&e.dataTransfer.isEmpty())&&(e.dataValue||(e.dataValue=""),CKEDITOR.env.gecko&&"drop"==e.method&&t.toolbox&&t.once("afterPaste",function(){t.toolbox.focus()}),t.fire("paste",e)))}function e(e){function a(){var t=e.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var a=function(t){e.readOnly&&"cut"==t.name||g.initPasteDataTransfer(t,e),t.data.preventDefault()};t.on("copy",a),t.on("cut",a),t.on("cut",function(){e.readOnly||e.extractSelectedHtml()},null,null,999)}t.on(g.mainPasteEvent,function(t){"beforepaste"==g.mainPasteEvent&&D||p(t)}),"beforepaste"==g.mainPasteEvent&&(t.on("paste",function(t){h||(i(),t.data.preventDefault(),p(t),o("paste"))}),t.on("contextmenu",s,null,null,0),t.on("beforepaste",function(t){!t.data||t.data.$.ctrlKey||t.data.$.shiftKey||s()},null,null,0)),t.on("beforecut",function(){!D&&l()});var n;t.attachListener(CKEDITOR.env.ie?t:e.document.getDocumentElement(),"mouseup",function(){n=setTimeout(function(){f()},0)}),e.on("destroy",function(){clearTimeout(n)}),t.on("keyup",f)}function n(t){return{type:t,canUndo:"cut"==t,startDisabled:!0,fakeKeystroke:"cut"==t?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&l();var t=function(t){if(CKEDITOR.env.ie)return o(t);try{return e.document.$.execCommand(t,!1,null)}catch(t){return!1}}(this.type);return t||e.showNotification(e.lang.clipboard[this.type+"Error"]),t}}}function r(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(e,a){function n(a,n){n=void 0===n||n,a?(a.method="paste",a.dataTransfer||(a.dataTransfer=g.initPasteDataTransfer()),t(e,a,n)):i&&e.showNotification(l,"info",e.config.clipboard_notificationDuration),e.fire("afterCommandExec",{name:"paste",command:r,returnValue:!!a})}var r=this,i=void 0===(a=void 0!==a&&null!==a?a:{}).notification||a.notification,s=a.type,o=CKEDITOR.tools.keystrokeToString(e.lang.common.keyboard,e.getCommandKeystroke(this)),l="string"==typeof i?i:e.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+o.aria+'">'+o.display+"</kbd>"),c="string"==typeof a?a:a.dataValue;s?e._.nextPasteType=s:delete e._.nextPasteType,"string"==typeof c?n({dataValue:c}):e.getClipboardData(n)}}}function i(){h=1,setTimeout(function(){h=0},100)}function s(){D=1,setTimeout(function(){D=0},10)}function o(t){var a=e.document,n=a.getBody(),r=!1,i=function(){r=!0};return n.on(t,i),CKEDITOR.env.version>7?a.$.execCommand(t):a.$.selection.createRange().execCommand(t),n.removeListener(t,i),r}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t,a,n,r=e.getSelection();r.getType()==CKEDITOR.SELECTION_ELEMENT&&(t=r.getSelectedElement())&&(a=r.getRanges()[0],(n=e.document.createText("")).insertBefore(t),a.setStartBefore(n),a.setEndAfter(t),r.selectRanges([a]),setTimeout(function(){t.getParent()&&(n.remove(),r.selectElement(t))},0))}}function c(t,a){var n,r=e.document,i=e.editable(),s=function(t){t.cancel()};if(!r.getById("cke_pastebin")){var o=e.getSelection(),l=o.createBookmarks();CKEDITOR.env.ie&&o.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!i.is("body")||CKEDITOR.env.ie?"div":"body",r);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var d=0,u=r.getWindow();CKEDITOR.env.webkit?(i.append(c),c.addClass("cke_editable"),i.is("body")||(d=("static"!=i.getComputedStyle("position")?i:CKEDITOR.dom.element.get(i.$.offsetParent)).getDocumentPosition().y)):i.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:u.getScrollPosition().y-d+10+"px",width:"1px",height:Math.max(1,u.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));var p=c.getParent().isReadOnly();p?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-10000px"),e.on("selectionChange",s,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(n=i.once("blur",s,null,null,-100)),p&&c.focus();var f=new CKEDITOR.dom.range(c);f.selectNodeContents(c);var T=f.select();CKEDITOR.env.ie&&(n=i.once("blur",function(){e.lockSelection(T)}));var g=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=g),n&&n.removeListener(),CKEDITOR.env.ie&&i.focus(),o.selectBookmarks(l),c.remove();var t;CKEDITOR.env.webkit&&(t=c.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(c=t),e.removeListener("selectionChange",s),a(c.getHtml())},0)}}function d(){if("paste"==g.mainPasteEvent)return e.fire("beforePaste",{type:"auto",method:"paste"}),!1;e.focus(),i();var t=e.focusManager;return t.lock(),e.editable().fire(g.mainPasteEvent)&&!o("paste")?(t.unlock(),!1):(t.unlock(),!0)}function u(t){if("wysiwyg"==e.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:var a=e.editable();return i(),void("paste"==g.mainPasteEvent&&a.fire("beforepaste"));case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},50)}}function p(a){var n={type:"auto",method:"paste",dataTransfer:g.initPasteDataTransfer(a)};n.dataTransfer.cacheData();var r=!1!==e.fire("beforePaste",n);r&&g.canClipboardApiBeTrusted(n.dataTransfer,e)?(a.data.preventDefault(),setTimeout(function(){t(e,n)},0)):c(a,function(a){n.dataValue=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),r&&t(e,n)})}function f(){if("wysiwyg"==e.mode){var t=T("paste");e.getCommand("cut").setState(T("cut")),e.getCommand("copy").setState(T("copy")),e.getCommand("paste").setState(t),e.fire("pasteState",t)}}function T(t){if(m&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==t)return CKEDITOR.TRISTATE_OFF;var a=e.getSelection(),n=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var g=CKEDITOR.plugins.clipboard,D=0,h=0,m=0;e.on("key",u),e.on("contentDom",a),e.on("selectionChange",function(t){m=t.data.selection.getRanges()[0].checkReadOnly(),f()}),e.contextMenu&&e.contextMenu.addListener(function(t,e){return m=e.getRanges()[0].checkReadOnly(),{cut:T("cut"),copy:T("copy"),paste:T("paste")}}),function(){function t(t,a,n,r,i){var s=e.lang.clipboard[a];e.addCommand(a,n),e.ui.addButton&&e.ui.addButton(t,{label:s,command:a,toolbar:"clipboard,"+r}),e.addMenuItems&&e.addMenuItem(a,{label:s,command:a,group:"clipboard",order:i})}t("Cut","cut",n("cut"),10,1),t("Copy","copy",n("copy"),20,4),t("Paste","paste",r(),30,8)}(),e.getClipboardData=function(t,a){function n(t){t.removeListener(),t.cancel(),a(t.data)}a||(a=t,t=null),e.on("paste",n,null,null,0),!1===d()&&(e.removeListener("paste",n),a(null))}}function a(t){if(CKEDITOR.env.webkit){if(!t.match(/^[^<]*$/g)&&!t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function n(t,e){function a(t){return CKEDITOR.tools.repeat("</p><p>",~~(t/2))+(t%2==1?"<br>":"")}return e=e.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),(e=e.replace(/<\/?[A-Z]+>/g,function(t){return t.toLowerCase()})).match(/^[^<]$/)?e:(CKEDITOR.env.webkit&&e.indexOf("<div>")>-1&&((e=e.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(e="<p>"+e.replace(/(<div>(<br>|)<\/div>)+/g,function(t){return a(t.split("</div><div>").length+1)})+"</p>"),e=(e=e.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(e=e.replace(/^<br><br>$/,"<br>")),e.indexOf("<br><br>")>-1&&(e="<p>"+e.replace(/(<br>){2,}/g,function(t){return a(t.length/4)})+"</p>")),s(t,e))}function r(){function t(){var t={};for(var e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}function e(){var e=new CKEDITOR.filter;return e.allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),e}var a={};return{get:function(t){return"plain-text"==t?a.plainText||(a.plainText=new CKEDITOR.filter("br")):"semantic-content"==t?a.semanticContent||(a.semanticContent=e()):t?new CKEDITOR.filter(t):null}}}function i(t,e,a){var n=CKEDITOR.htmlParser.fragment.fromHtml(e),r=new CKEDITOR.htmlParser.basicWriter;return a.applyTo(n,!0,!1,t.activeEnterMode),n.writeHtml(r),r.getHtml()}function s(t,e){return t.enterMode==CKEDITOR.ENTER_BR?e=e.replace(/(<\/p><p>)+/g,function(t){return CKEDITOR.tools.repeat("<br>",t.length/7*2)}).replace(/<\/?p>/g,""):t.enterMode==CKEDITOR.ENTER_DIV&&(e=e.replace(/<(\/)?p>/g,"<$1div>")),e}function o(t){t.data.preventDefault(),t.data.$.dataTransfer.dropEffect="none"}function l(e){var a=CKEDITOR.plugins.clipboard;e.on("contentDom",function(){function n(a,n,r){n.select(),t(e,{dataTransfer:r,method:"drop"},1),r.sourceEditor.fire("saveSnapshot"),r.sourceEditor.editable().extractHtmlFromRange(a),r.sourceEditor.getSelection().selectRanges([a]),r.sourceEditor.fire("saveSnapshot")}function r(n,r){n.select(),t(e,{dataTransfer:r,method:"drop"},1),a.resetDragDataTransfer()}function i(t,a,n){var r={$:t.data.$,target:t.data.getTarget()};a&&(r.dragRange=a),n&&(r.dropRange=n),!1===e.fire(t.name,r)&&t.data.preventDefault()}function s(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t.getChildCount()}var o=e.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(e),c=e.ui.space("top"),d=e.ui.space("bottom");a.preventDefaultDropOnElement(c),a.preventDefaultDropOnElement(d),o.attachListener(l,"dragstart",i),o.attachListener(e,"dragstart",a.resetDragDataTransfer,a,null,1),o.attachListener(e,"dragstart",function(t){a.initDragDataTransfer(t,e)},null,null,2),o.attachListener(e,"dragstart",function(){var t=a.dragRange=e.getSelection().getRanges()[0];CKEDITOR.env.ie&&CKEDITOR.env.version<10&&(a.dragStartContainerChildCount=t?s(t.startContainer):null,a.dragEndContainerChildCount=t?s(t.endContainer):null)},null,null,100),o.attachListener(l,"dragend",i),o.attachListener(e,"dragend",a.initDragDataTransfer,a,null,1),o.attachListener(e,"dragend",a.resetDragDataTransfer,a,null,100),o.attachListener(l,"dragover",function(t){if(CKEDITOR.env.edge)t.data.preventDefault();else{var e=t.data.getTarget();e&&e.is&&e.is("html")?t.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&t.data.$.dataTransfer.types.contains("Files")&&t.data.preventDefault()}}),o.attachListener(l,"drop",function(t){if(!t.data.$.defaultPrevented){t.data.preventDefault();var n=t.data.getTarget();if(!n.isReadOnly()||n.type==CKEDITOR.NODE_ELEMENT&&n.is("html")){var r=a.getRangeAtDropPosition(t,e),s=a.dragRange;r&&i(t,s,r)}}},null,null,9999),o.attachListener(e,"drop",a.initDragDataTransfer,a,null,1),o.attachListener(e,"drop",function(t){var i=t.data;if(i){var s=i.dropRange,o=i.dragRange,l=i.dataTransfer;l.getTransferType(e)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(o,s,l,e)},0):l.getTransferType(e)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?n(o,s,l):r(s,l)}},null,null,9999)})}var c;CKEDITOR.plugins.add("clipboard",{requires:"notification,toolbar",lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"copy,copy-rtl,cut,cut-rtl,paste,paste-rtl",hidpi:!0,init:function(t){var s,o=r();if(t.config.forcePasteAsPlainText?s="plain-text":t.config.pasteFilter?s=t.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in t.config||(s="semantic-content"),t.pasteFilter=o.get(s),e(t),l(t),CKEDITOR.env.gecko){var c,d=["image/png","image/jpeg","image/gif"];t.on("paste",function(e){var a=e.data,n=a.dataValue,r=a.dataTransfer;if(!n&&"paste"==a.method&&r&&1==r.getFilesCount()&&c!=r.id){var i=r.getFile(0);if(-1!=CKEDITOR.tools.indexOf(d,i.type)){var s=new FileReader;s.addEventListener("load",function(){e.data.dataValue='<img src="'+s.result+'" />',t.fire("paste",e.data)},!1),s.addEventListener("abort",function(){t.fire("paste",e.data)},!1),s.addEventListener("error",function(){t.fire("paste",e.data)},!1),s.readAsDataURL(i),c=a.dataTransfer.id,e.stop()}}},null,null,1)}t.on("paste",function(e){if(e.data.dataTransfer||(e.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!e.data.dataValue){var a=e.data.dataTransfer,n=a.getData("text/html");n?(e.data.dataValue=n,e.data.type="html"):(n=a.getData("text/plain"))&&(e.data.dataValue=t.editable().transformPlainTextToHtml(n),e.data.type="text")}},null,null,1),t.on("paste",function(t){var e=t.data.dataValue,a=CKEDITOR.dtd.$block;if(e.indexOf("Apple-")>-1&&(e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=t.data.type&&(e=e.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(t,e){return e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),e.indexOf('<br class="Apple-interchange-newline">')>-1&&(t.data.startsWithEOL=1,t.data.preSniffing="html",e=e.replace(/<br class="Apple-interchange-newline">/,"")),e=e.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),e.match(/^<[^<]+cke_(editable|contents)/i)){var n,r,i=new CKEDITOR.dom.element("div");for(i.setHtml(e);1==i.getChildCount()&&(n=i.getFirst())&&n.type==CKEDITOR.NODE_ELEMENT&&(n.hasClass("cke_editable")||n.hasClass("cke_contents"));)i=r=n;r&&(e=r.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?e=e.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(e,n){return n.toLowerCase()in a?(t.data.preSniffing="html","<"+n):e}):CKEDITOR.env.webkit?e=e.replace(/<\/(\w+)><div><br><\/div>$/,function(e,n){return n in a?(t.data.endsWithEOL=1,"</"+n+">"):e}):CKEDITOR.env.gecko&&(e=e.replace(/(\s)<br>$/,"$1")),t.data.dataValue=e},null,null,3),t.on("paste",function(e){var r,s=e.data,l=t._.nextPasteType||s.type,c=s.dataValue,d=t.config.clipboard_defaultContentType||"html",u=s.dataTransfer.getTransferType(t);r="html"==l||"html"==s.preSniffing?"html":a(c),delete t._.nextPasteType,"htmlifiedtext"==r&&(c=n(t.config,c)),"text"==l&&"html"==r?c=i(t,c,o.get("plain-text")):u==CKEDITOR.DATA_TRANSFER_EXTERNAL&&t.pasteFilter&&!s.dontFilter&&(c=i(t,c,t.pasteFilter)),s.startsWithEOL&&(c='<br data-cke-eol="1">'+c),s.endsWithEOL&&(c+='<br data-cke-eol="1">'),"auto"==l&&(l="html"==r||"html"==d?"html":"text"),s.type=l,s.dataValue=c,delete s.preSniffing,delete s.startsWithEOL,delete s.endsWithEOL},null,null,6),t.on("paste",function(e){var a=e.data;a.dataValue&&(t.insertHtml(a.dataValue,a.type,a.range),setTimeout(function(){t.fire("afterPaste")},0))},null,null,1e3)}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||CKEDITOR.env.version>=16)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||CKEDITOR.env.version>=16,isFileApiSupported:!CKEDITOR.env.ie||CKEDITOR.env.version>9,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(t,e){return t.getTransferType(e)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||(!(!CKEDITOR.env.chrome||t.isEmpty())||(!(!CKEDITOR.env.gecko||!t.getData("text/html")&&!t.getFilesCount())||(!(!(CKEDITOR.env.safari&&CKEDITOR.env.version>=603)||CKEDITOR.env.iOS)||!!(CKEDITOR.env.edge&&CKEDITOR.env.version>=16))))},getDropTarget:function(t){var e=t.editable();return CKEDITOR.env.ie&&CKEDITOR.env.version<9||e.isInline()?e:t.document},fixSplitNodesAfterDrop:function(t,e,a,n){function r(t,a,n){var r=t;if(r.type==CKEDITOR.NODE_TEXT&&(r=t.getParent()),r.equals(a)&&n!=a.getChildCount())return i(e),!0}function i(t){var e=t.startContainer.getChild(t.startOffset-1),a=t.startContainer.getChild(t.startOffset);if(e&&e.type==CKEDITOR.NODE_TEXT&&a&&a.type==CKEDITOR.NODE_TEXT){var n=e.getLength();e.setText(e.getText()+a.getText()),a.remove(),t.setStart(e,n),t.collapse(!0)}}var s=e.startContainer;"number"==typeof n&&"number"==typeof a&&s.type==CKEDITOR.NODE_ELEMENT&&(r(t.startContainer,s,a)||r(t.endContainer,s,n))},isDropRangeAffectedByDragRange:function(t,e){var a=e.startContainer,n=e.endOffset;return!!(t.endContainer.equals(a)&&t.endOffset<=n)||(!!(t.startContainer.getParent().equals(a)&&t.startContainer.getIndex()<n)||!!(t.endContainer.getParent().equals(a)&&t.endContainer.getIndex()<n))},internalDrop:function(e,a,n,r){var i,s,o,l=CKEDITOR.plugins.clipboard,c=r.editable();r.fire("saveSnapshot"),r.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&CKEDITOR.env.version<10&&this.fixSplitNodesAfterDrop(e,a,l.dragStartContainerChildCount,l.dragEndContainerChildCount),(o=this.isDropRangeAffectedByDragRange(e,a))||(i=e.createBookmark(!1)),s=a.clone().createBookmark(!1),o&&(i=e.createBookmark(!1));var d=i.startNode,u=i.endNode,p=s.startNode;u&&d.getPosition(p)&CKEDITOR.POSITION_PRECEDING&&u.getPosition(p)&CKEDITOR.POSITION_FOLLOWING&&p.insertBefore(d),(e=r.createRange()).moveToBookmark(i),c.extractHtmlFromRange(e,1),(a=r.createRange()).moveToBookmark(s),t(r,{dataTransfer:n,method:"drop",range:a},1),r.fire("unlockSnapshot")},getRangeAtDropPosition:function(t,e){var a,n=t.data.$,r=n.clientX,i=n.clientY,s=e.getSelection(!0).getRanges()[0],o=e.createRange();if(t.data.testRange)return t.data.testRange;if(document.caretRangeFromPoint&&e.document.$.caretRangeFromPoint(r,i))a=e.document.$.caretRangeFromPoint(r,i),o.setStart(CKEDITOR.dom.node(a.startContainer),a.startOffset),o.collapse(!0);else if(n.rangeParent)o.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),o.collapse(!0);else{if(CKEDITOR.env.ie&&CKEDITOR.env.version>8&&s&&e.editable().hasFocus)return s;if(!document.body.createTextRange)return null;e.focus(),a=e.document.getBody().$.createTextRange();try{for(var l=!1,c=0;c<20&&!l;c++){if(!l)try{a.moveToPoint(r,i-c),l=!0}catch(t){}if(!l)try{a.moveToPoint(r,i+c),l=!0}catch(t){}}if(l){var d="cke-temp-"+(new Date).getTime();a.pasteHTML('<span id="'+d+'">​</span>');var u=e.document.getById(d);o.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()}else{var p=e.document.$.elementFromPoint(r,i),f=new CKEDITOR.dom.element(p);if(f.equals(e.editable())||"html"==f.getName())return s&&s.startContainer&&!s.startContainer.equals(e.editable())?s:null;r<f.getClientRect().left?(o.setStartAt(f,CKEDITOR.POSITION_AFTER_START),o.collapse(!0)):(o.setStartAt(f,CKEDITOR.POSITION_BEFORE_END),o.collapse(!0))}}catch(t){return null}}return o},initDragDataTransfer:function(t,e){var a=t.data.$?t.data.$.dataTransfer:null,n=new this.dataTransfer(a,e);"dragstart"===t.name&&n.storeId(),a?this.dragData&&n.id==this.dragData.id?n=this.dragData:this.dragData=n:this.dragData?n=this.dragData:this.dragData=n,t.data.dataTransfer=n},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(t,e){if(this.isCustomCopyCutSupported){if(t&&t.data&&t.data.$){var a=t.data.$.clipboardData,n=new this.dataTransfer(a,e);return"copy"!==t.name&&"cut"!==t.name||n.storeId(),this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData).$=a:this.copyCutData=n,n}return new this.dataTransfer(null,e)}return new this.dataTransfer(CKEDITOR.env.edge&&t&&t.data.$&&t.data.$.clipboardData||null,e)},preventDefaultDropOnElement:function(t){t&&t.on("dragover",o)}},c=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(t,e){t&&(this.$=t),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/<!--(?:Start|End)Fragment-->/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(t){return t=t.toLowerCase(),"text"==t||"text/plain"==t?"Text":"url"==t?"URL":t}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(c),this.id||(this.id="Text"==c?"":"cke-"+CKEDITOR.tools.getUniqueId()),e&&(this.sourceEditor=e,this.setData("text/html",e.getSelectedHtml(1)),"Text"==c||this.getData("text/plain")||this.setData("text/plain",e.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(t,e){var a="text/html"==(t=this._.normalizeType(t))&&e?this._.nativeHtmlCache:this._.data[t];if(function(t){return void 0===t||null===t||""===t}(a)){if(this._.fallbackDataTransfer.isRequired())a=this._.fallbackDataTransfer.getData(t,e);else try{a=this.$.getData(t)||""}catch(t){a=""}"text/html"!=t||e||(a=this._stripHtml(a))}return"Text"==t&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==a.substring(0,7)&&(a=""),function(t){if("string"!=typeof t)return t;var e=t.indexOf("</html>");return-1!==e?t.substring(0,e+7):t}(a)},setData:function(t,e){if(t=this._.normalizeType(t),"text/html"==t?(this._.data[t]=this._stripHtml(e),this._.nativeHtmlCache=e):this._.data[t]=e,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==t||"Text"==t)if("Text"==c&&"Text"==t&&(this.id=e),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(t,e);else try{this.$.setData(t,e)}catch(t){}},storeId:function(){"Text"!==c&&this.setData(c,this.id)},getTransferType:function(t){return this.sourceEditor?this.sourceEditor==t?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function t(t){t=n._.normalizeType(t);var e=n.getData(t);"text/html"==t&&(n._.nativeHtmlCache=n.getData(t,!0),e=n._stripHtml(e)),e&&(n._.data[t]=e)}if(this.$){var e,a,n=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(e=0;e<this.$.types.length;e++)t(this.$.types[e])}else t("Text"),t("URL");if(a=this._getImageFromClipboard(),this.$&&this.$.files||a){if(this._.files=[],this.$.files&&this.$.files.length)for(e=0;e<this.$.files.length;e++)this._.files.push(this.$.files[e]);0===this._.files.length&&a&&this._.files.push(a)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(t){return this._.files.length?this._.files[t]:this.$&&this.$.files&&this.$.files.length?this.$.files[t]:0===t?this._getImageFromClipboard():void 0},isEmpty:function(){var t,e={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(this._.data),function(t){e[t]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var a=0;a<this.$.types.length;a++)e[this.$.types[a]]=1}else e.Text=1,e.URL=1;"Text"!=c&&(e[c]=0);for(t in e)if(e[t]&&""!==this.getData(t))return!1;return!0},_getImageFromClipboard:function(){var t;if(this.$&&this.$.items&&this.$.items[0])try{if((t=this.$.items[0].getAsFile())&&t.type)return t}catch(t){}},_stripHtml:function(t){var e=t;if(e&&e.length){e=e.replace(this._.metaRegExp,"");var a=this._.bodyRegExp.exec(e);a&&a.length&&(e=(e=a[1]).replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(t){this._dataTransfer=t,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var t=CKEDITOR.plugins.clipboard.fallbackDataTransfer,e=this._dataTransfer.$;if(null===t._isCustomMimeTypeSupported){if(!e)return!1;var a="cke/mimetypetest";t._isCustomMimeTypeSupported=!1;try{e.setData(a,"cke test value"),t._isCustomMimeTypeSupported="cke test value"===e.getData(a),e.clearData(a)}catch(t){}}return!t._isCustomMimeTypeSupported},getData:function(t,e){var a=this._getData(this._customDataFallbackType,!0);if(e)return a;var n=this._extractDataComment(a),r=null;return r=t===this._customDataFallbackType?n.content:n.data&&n.data[t]?n.data[t]:this._getData(t,!0),null!==r?r:""},setData:function(t,e){var a=t===this._customDataFallbackType;a&&(e=this._applyDataComment(e,this._getFallbackTypeData()));var n=e,r=this._dataTransfer.$;try{r.setData(t,n),a&&(this._dataTransfer._.nativeHtmlCache=n)}catch(e){if(this._isUnsupportedMimeTypeError(e)){var i=CKEDITOR.plugins.clipboard.fallbackDataTransfer;-1===CKEDITOR.tools.indexOf(i._customTypes,t)&&i._customTypes.push(t);var s=this._getFallbackTypeContent(),o=this._getFallbackTypeData();o[t]=n;try{n=this._applyDataComment(s,o),r.setData(this._customDataFallbackType,n),this._dataTransfer._.nativeHtmlCache=n}catch(t){n=""}}}return n},_getData:function(t,e){var a=this._dataTransfer._.data;if(!e&&a[t])return a[t];try{return this._dataTransfer.$.getData(t)}catch(t){return null}},_getFallbackTypeContent:function(){var t=this._dataTransfer._.data[this._customDataFallbackType];return t||(t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),t},_getFallbackTypeData:function(){var t=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},a=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(t,function(t){void 0!==a[t]?e[t]=a[t]:void 0!==e[t]&&(e[t]=e[t])},this),e},_isUnsupportedMimeTypeError:function(t){return t.message&&-1!==t.message.search(/element not found/gi)},_extractDataComment:function(t){var e={data:null,content:t||""};if(t&&t.length>16){var a;(a=/<!--cke-data:(.*?)-->/g.exec(t))&&a[1]&&(e.data=JSON.parse(decodeURIComponent(a[1])),e.content=t.replace(a[0],""))}return e},_applyDataComment:function(t,e){var a="";return e&&CKEDITOR.tools.objectKeys(e).length&&(a="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(e))+"--\x3e"),a+(t&&t.length?t:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4;