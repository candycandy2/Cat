"use strict";CKEDITOR.htmlParser.element=function(t,e){this.name=t,this.attributes=e||{},this.children=[];var r=t||"",n=r.match(/^cke:(.*)/);n&&(r=n[1]);var i=!!(CKEDITOR.dtd.$nonBodyContent[r]||CKEDITOR.dtd.$block[r]||CKEDITOR.dtd.$listItem[r]||CKEDITOR.dtd.$tableContent[r]||CKEDITOR.dtd.$nonEditable[r]||"br"==r);this.isEmpty=!!CKEDITOR.dtd.$empty[t],this.isUnknown=!CKEDITOR.dtd[t],this._={isBlockLike:i,hasInlineStarted:this.isEmpty||!i}},CKEDITOR.htmlParser.cssStyle=function(){var t=arguments[0],e={};return((t instanceof CKEDITOR.htmlParser.element?t.attributes.style:t)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,r,n){"font-family"==r&&(n=n.replace(/["']/g,"")),e[r.toLowerCase()]=n}),{rules:e,populate:function(t){var e=this.toString();e&&(t instanceof CKEDITOR.dom.element?t.setAttribute("style",e):t instanceof CKEDITOR.htmlParser.element?t.attributes.style=e:t.style=e)},toString:function(){var t=[];for(var r in e)e[r]&&t.push(r,":",e[r],";");return t.join("")}}},function(){function t(t){return function(e){return e.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof t?e.name==t:e.name in t)}}var e=function(t,e){return t=t[0],e=e[0],t<e?-1:t>e?1:0},r=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:r.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(t,e){var r,n,i=this;if((e=i.getFilterContext(e)).off)return!0;for(i.parent||t.onRoot(e,i);;){if(r=i.name,!(n=t.onElementName(e,r)))return this.remove(),!1;if(i.name=n,!(i=t.onElement(e,i)))return this.remove(),!1;if(i!==this)return this.replaceWith(i),!1;if(i.name==r)break;if(i.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(i),!1;if(!i.name)return this.replaceWithChildren(),!1}var s,l,a,h=i.attributes;for(s in h){for(a=s,l=h[s];;){if(a=t.onAttributeName(e,s)){if(a!=s){delete h[s],s=a;continue}break}delete h[s];break}a&&(!1===(l=t.onAttribute(e,i,a,l))?delete h[a]:h[a]=l)}return i.isEmpty||this.filterChildren(t,!1,e),!0},filterChildren:r.filterChildren,writeHtml:function(t,r){r&&this.filter(r);var n,i,s,l,a=this.name,h=[],o=this.attributes;t.openTag(a,o);for(n in o)h.push([n,o[n]]);for(t.sortAttributes&&h.sort(e),s=0,l=h.length;s<l;s++)i=h[s],t.attribute(i[0],i[1]);t.openTagClose(a,this.isEmpty),this.writeChildrenHtml(t),this.isEmpty||t.closeTag(a)},writeChildrenHtml:r.writeChildrenHtml,replaceWithChildren:function(){for(var t=this.children,e=t.length;e;)t[--e].insertAfter(this);this.remove()},forEach:r.forEach,getFirst:function(e){if(!e)return this.children.length?this.children[0]:null;"function"!=typeof e&&(e=t(e));for(var r=0,n=this.children.length;r<n;++r)if(e(this.children[r]))return this.children[r];return null},getHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(t),t.getHtml()},setHtml:function(t){for(var e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(t).children,r=0,n=e.length;r<n;++r)e[r].parent=this},getOuterHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(t),t.getHtml()},split:function(t){for(var e=this.children.splice(t,this.children.length-t),r=this.clone(),n=0;n<e.length;++n)e[n].parent=r;return r.children=e,e[0]&&(e[0].previous=null),t>0&&(this.children[t-1].next=null),this.parent.add(r,this.getIndex()+1),r},find:function(t,e){void 0===e&&(e=!1);var r,n=[];for(r=0;r<this.children.length;r++){var i=this.children[r];"function"==typeof t&&t(i)?n.push(i):"string"==typeof t&&i.name===t&&n.push(i),e&&i.find&&(n=n.concat(i.find(t,e)))}return n},addClass:function(t){if(!this.hasClass(t)){var e=this.attributes.class||"";this.attributes.class=e+(e?" ":"")+t}},removeClass:function(t){var e=this.attributes.class;e&&((e=CKEDITOR.tools.trim(e.replace(new RegExp("(?:\\s+|^)"+t+"(?:\\s+|$)")," ")))?this.attributes.class=e:delete this.attributes.class)},hasClass:function(t){var e=this.attributes.class;return!!e&&new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e)},getFilterContext:function(t){var e=[];if(t||(t={off:!1,nonEditable:!1,nestedEditable:!1}),t.off||"off"!=this.attributes["data-cke-processor"]||e.push("off",!0),t.nonEditable||"false"!=this.attributes.contenteditable?t.nonEditable&&!t.nestedEditable&&"true"==this.attributes.contenteditable&&e.push("nestedEditable",!0):e.push("nonEditable",!0),e.length){t=CKEDITOR.tools.copy(t);for(var r=0;r<e.length;r+=2)t[e[r]]=e[r+1]}return t}},!0)}();