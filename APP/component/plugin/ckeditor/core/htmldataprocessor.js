!function(){function e(e,t){function i(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("Â "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function c(e,t){return function(r){r.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(d(r),(!e||!1!==("function"==typeof t?t(r):t))&&s(r)&&r.add(i(e)))}}function u(e,t){if((!p||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.name&&!e.attributes["data-cke-eol"])return!0;var r;if(e.type==CKEDITOR.NODE_TEXT&&(r=e.value.match(g))){if(r.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,r.index)).insertBefore(e),e.value=r[0]),!CKEDITOR.env.needsBrFiller&&p&&(!t||e.parent.name in m))return!0;if(!p){var n=e.previous;if(n&&"br"==n.name)return!0;if(!n||o(n))return!0}}return!1}function d(e){var t,n,l=[],c=r(e);if(c)for(u(c,1)&&l.push(c);c;)o(c)&&(t=a(c))&&u(t)&&((n=a(t))&&!o(n)?l.push(t):(i(p).insertAfter(t),t.remove())),c=c.previous;for(var d=0;d<l.length;d++)l[d].remove()}function s(e){if(!p&&!CKEDITOR.env.needsBrFiller&&e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)return!1;if(!p&&!CKEDITOR.env.needsBrFiller&&(document.documentMode>7||e.name in CKEDITOR.dtd.tr||e.name in CKEDITOR.dtd.$listItem))return!1;var t=r(e);return!t||"form"==e.name&&"input"==t.name}var f={elements:{}},p="html"==t,m=CKEDITOR.tools.extend({},x);for(var E in m)"#"in k[E]||delete m[E];for(E in m)f.elements[E]=c(p,e.config.fillEmptyBlocks);return f.root=c(p,!1),f.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var r=t.attributes;if("data-cke-bogus"in r||"data-cke-eol"in r)delete r["data-cke-bogus"];else{var c=n(t),u=a(t);!c&&o(t.parent)?l(t.parent,i(e)):o(c)&&u&&!o(u)&&i(e).insertBefore(c)}}}}(p),f}function t(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function r(e){for(var t=e.children[e.children.length-1];t&&i(t);)t=t.previous;return t}function n(e){for(var t=e.next;t&&i(t);)t=t.next;return t}function a(e){for(var t=e.previous;t&&i(t);)t=t.previous;return t}function i(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function o(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in x||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function l(e,t){var r=e.children[e.children.length-1];e.children.push(t),t.parent=e,r&&(r.next=t,t.previous=r)}function c(e){return e.parent?e.getIndex():-1}function u(e){var t=e.attributes;"false"!=t.contenteditable&&(t["data-cke-editable"]=t.contenteditable?"true":1),t.contenteditable="false"}function d(e){var t=e.attributes;switch(t["data-cke-editable"]){case"true":t.contenteditable="true";break;case"1":delete t.contenteditable}}function s(e){return e.replace(M,function(e,t,r){return"<"+t+r.replace(w,function(e,t){return $.test(t)&&-1==r.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e})+">"})}function f(e,t){return e.replace(t,function(e,t,r){return 0===e.indexOf("<textarea")&&(e=t+v(r).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function p(e){return e.replace(H,function(e,t){return decodeURIComponent(t)})}function m(e){return e.replace(S,"$1cke:$2")}function E(e){return e.replace(B,"$1$2")}function h(e){return e.replace(U,"<cke:$1$2></cke:$1>")}function D(e){return e.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")}function b(e){return e.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(e){return"\x3c!--"+I+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"--\x3e"})}function T(e){return e.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2")}function v(e){return e.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(e,t){return decodeURIComponent(t)})}function R(e,t){var r=t._.dataStore;return e.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return r&&r[t]||""})}function C(e,t){var r=[],n=t.config.protectedSource,a=t._.dataStore||(t._.dataStore={id:1}),i=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,o=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(n);e=e.replace(/<!--[\s\S]*?-->/g,function(e){return"\x3c!--{cke_tempcomment}"+(r.push(e)-1)+"--\x3e"});for(var l=0;l<o.length;l++)e=e.replace(o[l],function(e){return e=e.replace(i,function(e,t,n){return r[n]}),/cke_temp(comment)?/.test(e)?e:"\x3c!--{cke_temp}"+(r.push(e)-1)+"--\x3e"});return e=e.replace(i,function(e,t,n){return"\x3c!--"+I+(t?"{C}":"")+encodeURIComponent(r[n]).replace(/--/g,"%2D%2D")+"--\x3e"}),e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(e){return e.replace(/<!--\{cke_protected\}([^>]*)-->/g,function(e,t){return a[a.id]=decodeURIComponent(t),"{cke_protected_"+a.id+++"}"})}),e=e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(e,r,n,a){return"<"+r+n+">"+R(v(a),t)+"</"+r+">"})}function O(e,t){if(!e.children.length&&CKEDITOR.dtd[e.name][t]){var r=new CKEDITOR.htmlParser.element(t);e.add(r)}}CKEDITOR.htmlDataProcessor=function(r){var n,a,i=this;this.editor=r,this.dataFilter=n=new CKEDITOR.htmlParser.filter,this.htmlFilter=a=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,n.addRules(y),n.addRules(_,{applyToAll:!0}),n.addRules(e(r,"data"),{applyToAll:!0}),a.addRules(N),a.addRules(F,{applyToAll:!0}),a.addRules(e(r,"html"),{applyToAll:!0}),r.on("toHtml",function(e){var n,a=e.data,i=a.dataValue;i=T(i=D(i=h(i=m(i=f(i=s(i=f(i=C(i,r),P)),V)))));var o,l=a.context||r.editable().getName();CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==l&&(l="div",i="<pre>"+i+"</pre>",o=1);var c=r.document.createElement(l);c.setHtml("a"+i),i=(i=c.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),o&&(i=i.replace(/^<pre>|<\/pre>$/gi,"")),i=v(i=p(i=E(i))),n=!1!==a.fixForBody&&t(a.enterMode,r.config.autoParagraph),i=CKEDITOR.htmlParser.fragment.fromHtml(i,a.context,n),n&&O(i,n),a.dataValue=i},null,null,5),r.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&r.fire("dataFiltered")},null,null,6),r.on("toHtml",function(e){e.data.dataValue.filterChildren(i.dataFilter,!0)},null,null,10),r.on("toHtml",function(e){var t=e.data,r=t.dataValue,n=new CKEDITOR.htmlParser.basicWriter;r.writeChildrenHtml(n),r=n.getHtml(!0),t.dataValue=b(r)},null,null,15),r.on("toDataFormat",function(e){var n=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(n,e.data.context,t(e.data.enterMode,r.config.autoParagraph))},null,null,5),r.on("toDataFormat",function(e){e.data.dataValue.filterChildren(i.htmlFilter,!0)},null,null,10),r.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),r.on("toDataFormat",function(e){var t=e.data.dataValue,n=i.writer;n.reset(),t.writeChildrenHtml(n),t=R(t=v(t=n.getHtml(!0)),r),e.data.dataValue=t},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,r,n){var a,i,o,l,c=this.editor;return t&&"object"==typeof t?(a=t.context,r=t.fixForBody,n=t.dontFilter,i=t.filter,o=t.enterMode,l=t.protectedWhitespaces):a=t,a||null===a||(a=c.editable().getName()),c.fire("toHtml",{dataValue:e,context:a,fixForBody:r,dontFilter:n,filter:i||c.filter,enterMode:o||c.enterMode,protectedWhitespaces:l}).dataValue},toDataFormat:function(e,t){var r,n,a;return t&&(r=t.context,n=t.filter,a=t.enterMode),r||null===r||(r=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:n||this.editor.filter,context:r,enterMode:a||this.editor.enterMode}).dataValue}};var g=/(?:&nbsp;|\xa0)$/,I="{cke_protected}",k=CKEDITOR.dtd,K=["caption","colgroup","col","thead","tfoot","tbody"],x=CKEDITOR.tools.extend({},k.$blockLimit,k.$block),y={elements:{input:u,textarea:u}},_={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(e){if(e.attributes&&e.attributes.src){var t=e.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==t.indexOf("javascript")&&0!==t.indexOf("data")||(e.attributes["data-cke-pa-src"]=e.attributes.src,delete e.attributes.src)}}}},N={elements:{embed:function(e){var t=e.parent;if(t&&"object"==t.name){var r=t.attributes.width,n=t.attributes.height;r&&(e.attributes.width=r),n&&(e.attributes.height=n)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes["data-cke-saved-name"]))return!1}}},F={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var r=["name","href","src"],n=0;n<r.length;n++)"data-cke-saved-"+r[n]in t&&delete t[r[n]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var r,n;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(r=CKEDITOR.tools.indexOf(K,e.name),n=CKEDITOR.tools.indexOf(K,t.name)),r>-1&&n>-1&&r!=n||(r=c(e),n=c(t)),r>n?1:-1})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes.class&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes.class},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&l(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:d,textarea:d},attributes:{class:function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(F.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var M=/<(a|area|img|input|source)\b([^>]*)>/gi,w=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,$=/^(href|src|name)$/i,V=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,P=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,H=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,S=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,B=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,U=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}();